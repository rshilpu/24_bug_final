{% extends "../base.html" %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
</head>
<body>
    {% comment %} {{project}} {% endcomment %}
    <div class="container-fluid py-4">
      
        <div class="row">
          
          <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
              <div class="card">
                <div class="card-body p-3">
                  <div class="row">
                    <div class="col-8">
                      <div class="numbers">
                        <p class="text-sm mb-0 text-uppercase font-weight-bold">Total Project</p>
                        <h5 class="font-weight-bolder">
                          {{ total_projects }}
                        </h5>
                        {% comment %} <p class="mb-0">
                          <span class="text-success text-sm font-weight-bolder">+55%</span>
                          since yesterday
                        </p> {% endcomment %}
                      </div>
                    </div>
                    <div class="col-4 text-end">
                      <div class="icon icon-shape bg-gradient-primary shadow-primary text-center rounded-circle">
                        <i class="ni ni-money-coins text-lg opacity-10" aria-hidden="true"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
              <div class="card">
                <div class="card-body p-3">
                  <div class="row">
                    <div class="col-8">
                      <div class="numbers">
                        <p class="text-sm mb-0 text-uppercase font-weight-bold">Total Module</p>
                        <h5 class="font-weight-bolder">
                          {{ total_module }}
                        </h5>
                        {% comment %} <p class="mb-0">
                          <span class="text-success text-sm font-weight-bolder">+3%</span>
                          since last week
                        </p> {% endcomment %}
                      </div>
                    </div>
                    <div class="col-4 text-end">
                      <div class="icon icon-shape bg-gradient-danger shadow-danger text-center rounded-circle">
                        <i class="ni ni-world text-lg opacity-10" aria-hidden="true"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
              <div class="card">
                <div class="card-body p-3">
                  <div class="row">
                    <div class="col-8">
                      <div class="numbers">
                        <p class="text-sm mb-0 text-uppercase font-weight-bold">Total Task</p>
                        <h5 class="font-weight-bolder">
                          {{ total_task }}
                        </h5>
                        {% comment %} <p class="mb-0">
                          <span class="text-danger text-sm font-weight-bolder">-2%</span>
                          since last quarter
                        </p> {% endcomment %}
                      </div>
                    </div>
                    <div class="col-4 text-end">
                      <div class="icon icon-shape bg-gradient-success shadow-success text-center rounded-circle">
                        <i class="ni ni-paper-diploma text-lg opacity-10" aria-hidden="true"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-sm-6">
              <div class="card">
                <div class="card-body p-3">
                  <div class="row">
                    <div class="col-8">
                      <div class="numbers">
                        <p class="text-sm mb-0 text-uppercase font-weight-bold">Total Developer</p>
                        <h5 class="font-weight-bolder">
                          {{ total_developer }}
                        </h5>
                        {% comment %} <p class="mb-0">
                          <span class="text-success text-sm font-weight-bolder">+5%</span> than last month
                        </p> {% endcomment %}
                      </div>
                    </div>
                    <div class="col-4 text-end">
                      <div class="icon icon-shape bg-gradient-warning shadow-warning text-center rounded-circle">
                        <i class="ni ni-cart text-lg opacity-10" aria-hidden="true"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          
        </div>
        <div class="row mt-4">
            <div class="col-lg-7 mb-lg-0 mb-4">
                <div class="card z-index-2 h-100">
                  <div class="card-header pb-0 pt-3 bg-transparent">
                    <h6 class="text-capitalize">Projects</h6>
                    {% comment %} <p class="text-sm mb-0">
                      <i class="fa fa-arrow-up text-success" aria-hidden="true"></i>
                      <span class="font-weight-bold">4% more</span> in 2021
                    </p> {% endcomment %}
                  </div>
                  <div class="card-body p-3">
                    <div class="table-responsive p-0">
                        <table class="table align-items-center mb-0">
                          <thead>
                            <tr>
                              <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Project Name</th>
                              <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Description</th>
                              <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Technology</th>
                              <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Estimated Hours</th>
                              <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Start Date</th>
                              <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">End Date</th>
                              <th colspan = "3" class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Action</th>
                              
                              {% comment %} <th class="text-secondary opacity-7"></th> {% endcomment %}
                            </tr>
                          </thead>
                          <tbody>
                            {% for project in project  %}
                              <tr>
                                <td>
                                  <div class="d-flex px-2 py-1">
                                    <div class="d-flex flex-column justify-content-center">
                                      <h6 class="mb-0 text-sm">{{project.name}}</h6>
                                    </div>
                                  </div>
                                </td>
                                <td>
                                  <p class="text-xs font-weight-bold mb-0">{{project.description}}</p>
                                </td>
                                <td class="align-middle text-center text-sm">
                                  <span class="badge badge-sm bg-gradient-success">{{project.technology}}</span>
                                </td>
                                <td class="align-middle text-center">
                                  <span class="text-secondary text-xs font-weight-bold">{{project.estimated_hours}}</span>
                                </td>
                                <td class="align-middle">
                                  <span class="text-secondary text-xs font-weight-bold">{{project.startDate}}</span>
                                </td>
                                <td class="align-middle">
                                  <span class="text-secondary text-xs font-weight-bold">{{project.endDate}}</span>
                                </td>
                                <td class="align-middle">
                                  <a href="{% url "detail_project" project.id %}" class="btn btn-sm btn-outline-info">Report</a>
                                  {% comment %} <a href="{% url "update_project" project.id %}" class="btn btn-sm btn-outline-warning text-secondary">Edit</a>
                                  <a href="{% url "detail_project" project.id %}" class="btn btn-sm btn-outline-info">Detail</a>
                                  <a href="{% url "delete_project" project.id %}" class="btn btn-sm btn-outline-danger">Delete</a> {% endcomment %}
                                </td>
                                
                              </tr>
                            {% endfor %}
                          </tbody>
                        </table>
                      </div>
                  </div>
                </div>
              </div>
        </div>
        <div class="row mt-4">
        {% for project in project %}
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <div class="card">
                <div class="card-body p-3">
                    <div class="row">
                        <div class="col-12">
                            <h5 class="font-weight-bolder">{{ project.name }}</h5>
                            <h5 class="text-sm mb-0">Description: {{ project.description }}</h5>
                            <h5 class="text-sm mb-0"> Technology: {{ project.technology }}</h5>
                            {% for project_module in project.projectmodule_set.all %}
                            <h5 class="text-sm mb-0"> Module: {{ project_module.module_name }}</h5>
                            {% endfor %}
                            <div class="card-body p-3">
                              {% for task_info in tasks_with_developers %}
                              {% if task_info.task.project == project %}
                              <div class="card mb-3">
                                  <div class="card-body">
                                      <h5 class="text-sm mb-0">Task: {{ task_info.task.task_name }}</h5>
                                      <!-- Add more task details here -->
                                      <h5 class="text-sm mb-0">Status: {{ task_info.task.status }}</h5>
                                      <h5 class="text-sm mb-0">Priority: {{ task_info.task.priority }}</h5>
                                      {% if task_info.developer_name %}
                                      <h5 class="text-sm mb-0">Developer: {{ task_info.developer_name }}</h5>
                                      {% else %}
                                      <h5 class="text-sm mb-0">Developer: Not Assigned</h5>
                                      {% endif %}
                                      
                                  </div>
                              </div>
                              {% endif %}
                              {% endfor %}
                          </div>
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</body>
</html>
{% endblock content %}

